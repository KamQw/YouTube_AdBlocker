# Shadowrocket KamQw Ad Blocker
[General]
dns-server = https://doh.pub/dns-query, https://dns.alidns.com/dns-query, https://cloudflare-dns.com/dns-query, https://doh.opendns.com/dns-query
bypass-tun = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 0.0.0.0/31, ::ffff:0.0.0.0/31
skip-proxy = localhost, *.local, injections.adguard.org, local.adguard.org, captive.apple.com, guzzoni.apple.com, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32
bypass-system = true
ipv6 = true

[Rule]
#Ad Blocker
DOMAIN-KEYWORD,51yes,REJECT
DOMAIN-KEYWORD,acs86,REJECT
DOMAIN-KEYWORD,adashx,REJECT
DOMAIN-KEYWORD,adcome,REJECT
DOMAIN-KEYWORD,adinfuse,REJECT
DOMAIN-KEYWORD,admarvel,REJECT
DOMAIN-KEYWORD,admaster,REJECT
DOMAIN-KEYWORD,admdfs,REJECT
DOMAIN-KEYWORD,admob,REJECT
DOMAIN-KEYWORD,adnewnc,REJECT
DOMAIN-KEYWORD,adsage,REJECT
DOMAIN-KEYWORD,adsame,REJECT
DOMAIN-KEYWORD,adservice,REJECT
DOMAIN-KEYWORD,adsmind,REJECT
DOMAIN-KEYWORD,adsmogo,REJECT
DOMAIN-KEYWORD,adsrvmedia,REJECT
DOMAIN-KEYWORD,adsserving,REJECT
DOMAIN-KEYWORD,advert,REJECT
DOMAIN-KEYWORD,adview,REJECT
DOMAIN-KEYWORD,adwhirl,REJECT
DOMAIN-KEYWORD,adwords,REJECT
DOMAIN-KEYWORD,allyes,REJECT
DOMAIN-KEYWORD,analysis,REJECT
DOMAIN-KEYWORD,-analytics,REJECT
DOMAIN-KEYWORD,appads,REJECT
DOMAIN-KEYWORD,appadhoc,REJECT
DOMAIN-KEYWORD,applovin,REJECT
DOMAIN-KEYWORD,apptimize,REJECT
DOMAIN-KEYWORD,baichuan,REJECT
DOMAIN-KEYWORD,cnzz,REJECT
DOMAIN-KEYWORD,crashlytics,REJECT
DOMAIN-KEYWORD,dnserror,REJECT
DOMAIN-KEYWORD,domob,REJECT
DOMAIN-KEYWORD,doubleclick,REJECT
DOMAIN-KEYWORD,duomeng,REJECT
DOMAIN-KEYWORD,dwtrack,REJECT
DOMAIN-KEYWORD,emarbox,REJECT
DOMAIN-KEYWORD,flurry,REJECT
DOMAIN-KEYWORD,guanggao,REJECT
DOMAIN-KEYWORD,guomob,REJECT
DOMAIN-KEYWORD,growingio,REJECT
DOMAIN-KEYWORD,iad,REJECT
DOMAIN-KEYWORD,intercom,REJECT
DOMAIN-KEYWORD,inmobi,REJECT
DOMAIN-KEYWORD,lianmeng,REJECT
DOMAIN-KEYWORD,loggly,REJECT
DOMAIN-KEYWORD,metrics,REJECT
DOMAIN-KEYWORD,mobaders,REJECT
DOMAIN-KEYWORD,mobclix,REJECT
DOMAIN-KEYWORD,networkbench,REJECT
DOMAIN-KEYWORD,omgmta,REJECT
DOMAIN-KEYWORD,openx,REJECT
DOMAIN-KEYWORD,partnerad,REJECT
DOMAIN-KEYWORD,pingfore,REJECT
DOMAIN-KEYWORD,safebrowsing,REJECT
DOMAIN-KEYWORD,sensor,REJECT
DOMAIN-KEYWORD,shence,REJECT
DOMAIN-KEYWORD,shujupie,REJECT
DOMAIN-KEYWORD,smartadserver,REJECT
DOMAIN-KEYWORD,socdm,REJECT
DOMAIN-KEYWORD,supersonicads,REJECT
DOMAIN-KEYWORD,taboola,REJECT
DOMAIN-KEYWORD,tanx,REJECT
DOMAIN-KEYWORD,tapjoyads,REJECT
DOMAIN-KEYWORD,telemetry,REJECT
DOMAIN-KEYWORD,tingyun,REJECT
DOMAIN-KEYWORD,uedas,REJECT
DOMAIN-KEYWORD,umeng,REJECT
DOMAIN-KEYWORD,umtrack,REJECT
DOMAIN-KEYWORD,unidesk,REJECT
DOMAIN-KEYWORD,usage,REJECT
DOMAIN-KEYWORD,wlmonitor,REJECT
DOMAIN-KEYWORD,whalecloud,REJECT
DOMAIN-KEYWORD,zjtoolbar,REJECT
DOMAIN-SUFFIX,127.net,REJECT
DOMAIN-SUFFIX,3lift.com,REJECT
DOMAIN-SUFFIX,51.la,REJECT
DOMAIN-SUFFIX,510mall.com,REJECT
DOMAIN-SUFFIX,56txs4.com,REJECT
DOMAIN-SUFFIX,ad-survey.com,REJECT
DOMAIN-SUFFIX,ad373.com,REJECT
DOMAIN-SUFFIX,adcolony.com,REJECT
DOMAIN-SUFFIX,addthis.com,REJECT
DOMAIN-SUFFIX,adform.net,REJECT
DOMAIN-SUFFIX,adfuture.cn,REJECT
DOMAIN-SUFFIX,adinall.com,REJECT
DOMAIN-SUFFIX,adjust.com,REJECT
DOMAIN-SUFFIX,adkmob.com,REJECT
DOMAIN-SUFFIX,adglare.net,REJECT
DOMAIN-SUFFIX,adlefee.com,REJECT
DOMAIN-SUFFIX,admantx.com,REJECT
DOMAIN-SUFFIX,adnxs.com,REJECT
DOMAIN-SUFFIX,adsafeprotected.com,REJECT
DOMAIN-SUFFIX,adsunflower.com,REJECT
DOMAIN-SUFFIX,adsrvr.org,REJECT
DOMAIN-SUFFIX,adsymptotic.com,REJECT
DOMAIN-SUFFIX,adtechus.com,REJECT
DOMAIN-SUFFIX,adtilt.com,REJECT
DOMAIN-SUFFIX,adups.com,REJECT
DOMAIN-SUFFIX,advmob.cn,REJECT
DOMAIN-SUFFIX,adxpansion.com,REJECT
DOMAIN-SUFFIX,adxvip.com,REJECT
DOMAIN-SUFFIX,aerserv.com,REJECT
DOMAIN-SUFFIX,agkn.com,REJECT
DOMAIN-SUFFIX,amazon-adsystem.com,REJECT
DOMAIN-SUFFIX,analysys.cn,REJECT
DOMAIN-SUFFIX,app-adforce.jp,REJECT
DOMAIN-SUFFIX,app-measurement.com,REJECT
DOMAIN-SUFFIX,appboy.com,REJECT
DOMAIN-SUFFIX,appnext.com,REJECT
DOMAIN-SUFFIX,appier.net,REJECT
DOMAIN-SUFFIX,applvn.com,REJECT
DOMAIN-SUFFIX,appsflyer.com,REJECT
DOMAIN-SUFFIX,appsdt.com,REJECT
DOMAIN-SUFFIX,apptentive.com,REJECT
DOMAIN-SUFFIX,apsalar.com,REJECT
DOMAIN-SUFFIX,atwola.com,REJECT
DOMAIN-SUFFIX,awemwh.com,REJECT
DOMAIN-SUFFIX,betrad.com,REJECT
DOMAIN-SUFFIX,bidswitch.com,REJECT
DOMAIN-SUFFIX,bjytgw.com,REJECT
DOMAIN-SUFFIX,bluekai.com,REJECT
DOMAIN-SUFFIX,bongacams2.com,REJECT
DOMAIN-SUFFIX,bttrack.com,REJECT
DOMAIN-SUFFIX,bxmns.com,REJECT
DOMAIN-SUFFIX,c0594.com,REJECT
DOMAIN-SUFFIX,cappumedia.com,REJECT
DOMAIN-SUFFIX,cferw.com,REJECT
DOMAIN-SUFFIX,chartbeat.com,REJECT
DOMAIN-SUFFIX,chartbeat.net,REJECT
DOMAIN-SUFFIX,chartboost.com,REJECT
DOMAIN-SUFFIX,chaturbate.com,REJECT
DOMAIN-SUFFIX,clcknads.pro,REJECT
DOMAIN-SUFFIX,clickadu.com,REJECT
DOMAIN-SUFFIX,clickaine.com,REJECT
DOMAIN-SUFFIX,clickhubs.com,REJECT
DOMAIN-SUFFIX,cloudmobi.net,REJECT
DOMAIN-SUFFIX,cnadnet.com,REJECT
DOMAIN-SUFFIX,cnnic.cn,REJECT
DOMAIN-SUFFIX,cnnic.net,REJECT
DOMAIN-SUFFIX,cnnic.net.cn,REJECT
DOMAIN-SUFFIX,cocounion.com,REJECT
DOMAIN-SUFFIX,conviva.com,REJECT
DOMAIN-SUFFIX,copicvarianuty.info,REJECT
DOMAIN-SUFFIX,criteo.com,REJECT
DOMAIN-SUFFIX,crittercism.com,REJECT
DOMAIN-SUFFIX,crwdcntrl.net,REJECT
DOMAIN-SUFFIX,ctrmi.com,REJECT
DOMAIN-SUFFIX,demdex.net,REJECT
DOMAIN-SUFFIX,dianomi.com,REJECT
DOMAIN-SUFFIX,digitru.st,REJECT
DOMAIN-SUFFIX,dtscout.com,REJECT
DOMAIN-SUFFIX,disqusads.com,REJECT
DOMAIN-SUFFIX,doubleclick.net,REJECT
DOMAIN-SUFFIX,effectivemeasure.net,REJECT
DOMAIN-SUFFIX,endpo.in,REJECT
DOMAIN-SUFFIX,eum-appdynamics.com,REJECT
DOMAIN-SUFFIX,exoclick.com,REJECT
DOMAIN-SUFFIX,exposebox.com,REJECT
DOMAIN-SUFFIX,exosrv.com,REJECT
DOMAIN-SUFFIX,eyeota.net,REJECT
DOMAIN-SUFFIX,fraudmetrix.cn,REJECT
DOMAIN-SUFFIX,fui0.cn,REJECT
DOMAIN-SUFFIX,fwmrm.net,REJECT
DOMAIN-SUFFIX,georiot.com,REJECT
DOMAIN-SUFFIX,getrockerbox.com,REJECT
DOMAIN-SUFFIX,ggsafe.com,REJECT
DOMAIN-SUFFIX,go2cloud.org,REJECT
DOMAIN-SUFFIX,go-mpulse.net,REJECT
DOMAIN-SUFFIX,gowadogo.com,REJECT
DOMAIN-SUFFIX,heyzap.com,REJECT
DOMAIN-SUFFIX,highwebmedia.com,REJECT
DOMAIN-SUFFIX,histats.com,REJECT
DOMAIN-SUFFIX,i2000.xyz,REJECT
DOMAIN-SUFFIX,igexin.com,REJECT
DOMAIN-SUFFIX,imrworldwide.com,REJECT
DOMAIN-SUFFIX,inad.com,REJECT
DOMAIN-SUFFIX,indexww.com,REJECT
DOMAIN-SUFFIX,innovid.com,REJECT
DOMAIN-SUFFIX,instabug.com,REJECT
DOMAIN-SUFFIX,irs01.com,REJECT
DOMAIN-SUFFIX,jpush.cn,REJECT
DOMAIN-SUFFIX,juicyads.com,REJECT
DOMAIN-SUFFIX,kejet.net,REJECT
DOMAIN-SUFFIX,knlob.com,REJECT
DOMAIN-SUFFIX,kochava.com,REJECT
DOMAIN-SUFFIX,kontagent.net,REJECT
DOMAIN-SUFFIX,koolmediaoffers.com,REJECT
DOMAIN-SUFFIX,krxd.net,REJECT
DOMAIN-SUFFIX,leadzu.com,REJECT
DOMAIN-SUFFIX,leanplum.com,REJECT
DOMAIN-SUFFIX,lenzmx.com,REJECT
DOMAIN-SUFFIX,lnk0.com,REJECT
DOMAIN-SUFFIX,localytics.com,REJECT
DOMAIN-SUFFIX,luomi.com,REJECT
DOMAIN-SUFFIX,madserving.com,REJECT
DOMAIN-SUFFIX,mapbox.com,REJECT
DOMAIN-SUFFIX,mathtag.com,REJECT
DOMAIN-SUFFIX,meishesdk.com,REJECT
DOMAIN-SUFFIX,media.net,REJECT
DOMAIN-SUFFIX,metalex.io,REJECT
DOMAIN-SUFFIX,mfadsrvr.com,REJECT
DOMAIN-SUFFIX,midway.run,REJECT
DOMAIN-SUFFIX,mixpanel.com,REJECT
DOMAIN-SUFFIX,miaozhen.com,REJECT
DOMAIN-SUFFIX,mmstat.com,REJECT
DOMAIN-SUFFIX,moatads.com,REJECT
DOMAIN-SUFFIX,mob.com,REJECT
DOMAIN-SUFFIX,mobileapptracking.com,REJECT
DOMAIN-SUFFIX,mobiw.com,REJECT
DOMAIN-SUFFIX,mobmore.com,REJECT
DOMAIN-SUFFIX,mopub.com,REJECT
DOMAIN-SUFFIX,mparticle.com,REJECT
DOMAIN-SUFFIX,mxcdn.net,REJECT
DOMAIN-SUFFIX,mxpnl.com,REJECT
DOMAIN-SUFFIX,mybest.app,REJECT
DOMAIN-SUFFIX,nexage.com,REJECT
DOMAIN-SUFFIX,nr-data.net,REJECT
DOMAIN-SUFFIX,offerstrack.net,REJECT
DOMAIN-SUFFIX,omtrdc.net,REJECT
DOMAIN-SUFFIX,outbrain.com,REJECT
DOMAIN-SUFFIX,parsely.com,REJECT
DOMAIN-SUFFIX,peak-adx.com,REJECT
DOMAIN-SUFFIX,personaly.click,REJECT
DOMAIN-SUFFIX,phonesex.com,REJECT
DOMAIN-SUFFIX,ptawe.com,REJECT
DOMAIN-SUFFIX,puata.info,REJECT
DOMAIN-SUFFIX,pubnative.net,REJECT
DOMAIN-SUFFIX,pubmine.com,REJECT
DOMAIN-SUFFIX,qchannel01.cn,REJECT
DOMAIN-SUFFIX,qualtrics.com,REJECT
DOMAIN-SUFFIX,quantserve.com,REJECT
DOMAIN-SUFFIX,quixdtrk.com,REJECT
DOMAIN-SUFFIX,ravenjs.com,REJECT
DOMAIN-SUFFIX,rayjump.com,REJECT
DOMAIN-SUFFIX,resentaticexhaus.info,REJECT
DOMAIN-SUFFIX,revsci.net,REJECT
DOMAIN-SUFFIX,rubiconproject.com,REJECT
DOMAIN-SUFFIX,sailthru.com,REJECT
DOMAIN-SUFFIX,scorecardresearch.com,REJECT
DOMAIN-SUFFIX,segment.com,REJECT
DOMAIN-SUFFIX,serving-sys.com,REJECT
DOMAIN-SUFFIX,sessionm.com,REJECT
DOMAIN-SUFFIX,shareaholic.com,REJECT
DOMAIN-SUFFIX,sharethis.com,REJECT
DOMAIN-SUFFIX,simba.taobao.com,REJECT
DOMAIN-SUFFIX,simplepath.com,REJECT
DOMAIN-SUFFIX,skimresources.com,REJECT
DOMAIN-SUFFIX,smardroid.com,REJECT
DOMAIN-SUFFIX,snnd.co,REJECT
DOMAIN-SUFFIX,sonobi.com,REJECT
DOMAIN-SUFFIX,sponsorpay.com,REJECT
DOMAIN-SUFFIX,ssl2.duapps.com,REJECT
DOMAIN-SUFFIX,starmobs.com,REJECT
DOMAIN-SUFFIX,statcounter.com,REJECT
DOMAIN-SUFFIX,storygize.net,REJECT
DOMAIN-SUFFIX,summerhamster.com,REJECT
DOMAIN-SUFFIX,tagtic.cn,REJECT
DOMAIN-SUFFIX,talkingdata.com,REJECT
DOMAIN-SUFFIX,tango-deg.com,REJECT
DOMAIN-SUFFIX,tanv.com,REJECT
DOMAIN-SUFFIX,taplytics.com,REJECT
DOMAIN-SUFFIX,taptica.com,REJECT
DOMAIN-SUFFIX,tealiumiq.com,REJECT
DOMAIN-SUFFIX,testplus.cn,REJECT
DOMAIN-SUFFIX,tiqcdn.com,REJECT
DOMAIN-SUFFIX,trackclickers.com,REJECT
DOMAIN-SUFFIX,trackingio.com,REJECT
DOMAIN-SUFFIX,trackimpression.com,REJECT
DOMAIN-SUFFIX,trafficjunky.com,REJECT
DOMAIN-SUFFIX,trafficjunky.net,REJECT
DOMAIN-SUFFIX,trustx.org,REJECT
DOMAIN-SUFFIX,tsyndicate.com,REJECT
DOMAIN-SUFFIX,tuanxue360.net,REJECT
DOMAIN-SUFFIX,turn.com,REJECT
DOMAIN-SUFFIX,uberads.com,REJECT
DOMAIN-SUFFIX,udrig.com,REJECT
DOMAIN-SUFFIX,um0.cn,REJECT
DOMAIN-SUFFIX,um1.cn,REJECT
DOMAIN-SUFFIX,umindex.com,REJECT
DOMAIN-SUFFIX,umsns.com,REJECT
DOMAIN-SUFFIX,upcpi.com,REJECT
DOMAIN-SUFFIX,urbanairship.com,REJECT
DOMAIN-SUFFIX,usebutton.com,REJECT
DOMAIN-SUFFIX,uyunad.com,REJECT
DOMAIN-SUFFIX,vamaker.com,REJECT
DOMAIN-SUFFIX,vidcpm.com,REJECT
DOMAIN-SUFFIX,voiceads.cn,REJECT
DOMAIN-SUFFIX,vungle.com,REJECT
DOMAIN-SUFFIX,vrtcal.com,REJECT
DOMAIN-SUFFIX,webspectator.com,REJECT
DOMAIN-SUFFIX,xadchina.cn,REJECT
DOMAIN-SUFFIX,xdrig.com,REJECT
DOMAIN-SUFFIX,yhqfx1.com,REJECT
DOMAIN-SUFFIX,yldbt.com,REJECT
DOMAIN-SUFFIX,ymtracking.com,REJECT
DOMAIN-SUFFIX,youmi.net,REJECT
DOMAIN-SUFFIX,yxwwj.cn,REJECT
DOMAIN-SUFFIX,ztsafe.com,REJECT
# Anti DNS Poisoning
DOMAIN-KEYWORD,google,PROXY
DOMAIN-KEYWORD,gmail,DIRECT
DOMAIN-KEYWORD,youtube,PROXY
DOMAIN-SUFFIX,youtu.be,PROXY
# Final
FINAL,DIRECT

[URL Rewrite]
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad - reject-200
# Universal Ad Request
^https?:\/\/(www|s)\.youtube\.com\/api\/stats\/ads - reject-200
^https?:\/\/(www|s)\.youtube\.com\/(pagead|ptracking) - reject-200
^https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?adcontext - reject-200
^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v\d\/player\/ad_break url reject
# General Video Ad Request
(^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) $1$2$3 302
# YouTube Adblocker for Pre-Video Ad
(^https?:\/\/(?!r\d-)[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)\/ctier\/L(\/.+?)%2Cctier(%2C.+?)((\/probe\/1)|$) 302 $1$2$3
(^https?:\/\/(?!r\d-)[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)\/ctier\/L(\/.+?),ctier(,.+?)((\/probe\/1)|$) 302 $1$2$3
(^https?:\/\/(?!r\d-)[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier(,.+?)((&probe=1)|$) 302 $1$2$3
(^https?:\/\/(?!((r\d-)|manifest))[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier(,.+?)((&probe=1)|$) 302 $1$4$5
(^https?:\/\/(?!((r\d-)|manifest))[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)\/ctier\/L(\/.+?),ctier(,.+?)((\/probe\/1)|$) 302 $1$4$5
(^https?:\/\/(?!((r\d-)|manifest))[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)\/ctier\/L(\/.+?)%2Cctier(%2C.+?)((\/probe\/1)|$) 302 $1$4$5

[Script]
# Search|Play Page|Short Video|PiP|Background Play
youtube = type=http-response,pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting),requires-body=1,max-size=0,script-path=https://https://raw.githubusercontent.com/KamQw/YouTube_AdBlocker/main/YouTube.js

[MITM]
hostname = %APPEND% -redirector*.googlevideo.com,*.googlevideo.com,www.youtube.com,s.youtube.com,youtubei.googleapis.com
